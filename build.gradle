buildscript {
  repositories {
    maven {
      url "https://plugins.gradle.org/m2/"
    }
  }
  dependencies {
    classpath "gradle.plugin.com.palantir.graal:gradle-graal:0.4.0"
  }
}

plugins {
    id 'java'
    id 'application'
}

apply plugin: "com.palantir.graal"

repositories {
    jcenter()
}

dependencies {
	compile 'commons-cli:commons-cli:1.4'
}

application {
    mainClassName = 'ldapClient.App'
}

jar {
  manifest {
    attributes(
      'Main-Class': mainClassName
    )
  }
  from {
    configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }
  }
}

graal {
    mainClass 'ldapClient.App'
    outputName 'ldapClient'
    option '-H:ReflectionConfigurationFiles='+projectDir+'/src/main/resources/reflection_config.json'
}

